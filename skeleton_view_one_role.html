<html>
<head>
    View Role Details
</head>

<body>
    <div id="viewOneRoleVue">

        <table border="black">
            <tr>
                <th> Course ID </th>
                <th> Course Name </th>
                <th> Course Description</th>
            </tr>
            <tr>
                <td>
                    {{ role_details.role_id }}
                </td>
                <td>
                    {{ role_details.role_name }}
                </td>
                <td>
                    {{ role_details.role_desc }}
                </td>
            </tr>
        </table>
    </div>
</body>

</html>

<script src="JS/vue.js"></script>
<script src="https://unpkg.com/axios/dist/axios.min.js"></script>

<script>
    const viewOneRoleVue = Vue.createApp({
        data() {
            return {
                params: {},
                role_id: '',
                role_details: {
                    role_id: '',
                    role_name: "",
                    role_desc: ""
                }
            }
        },
        methods: {
            getRoleById() {
                axios.post("PHP/functionGetRoleById.php", 
                {
                    role_id: this.role_id
                })
                    .then(response => {
                    if (response.status == 200) {
                        console.log(response.data);
                        this.role_details = response.data.records;
                    }
                    })
                    .catch(error => {
                    console.log(error.message);
                    console.log(error.response.data.status);
                    });
            }
        },
        beforeMount() {
            // url: 'skeleton_view_one_role?role_id=1&foo=1&bar=2');
            let urlParams = window.location.search.substring(1).split("&");
            for (param of urlParams) {
                let temp = param.split("=");
                let key = temp[0];
                let val = temp[1];
                this.params[key] = val;
            }
            console.log(this.params);
            this.role_id = parseInt(this.params.role_id);
            this.getRoleById()
        },
})

const vm = viewOneRoleVue.mount("#viewOneRoleVue")
</script>

