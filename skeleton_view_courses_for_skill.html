<html>
<head>
    View Courses by Skill
</head>

<body>
    <div id="viewCoursesForSkillVue">
        <select v-model="selected">
            <option value=""> Select One: </option>
            <option v-for="skill in skills" v-bind:value="skill.skill_id">
                {{ skill.skill_name }}
            </option>
        </select>
        <button type="button" v-on:click="getCourses()"> Get Courses By Skill </button>
        <ol>
            <li v-for="course in courses">
                {{ course.course_name }}
            </li>
        </ol>
    </div>
</body>
</html>


<script src="JS/vue.js"></script>
<script src="https://unpkg.com/axios/dist/axios.min.js"></script>

<script>
    const viewCoursesForSkillVue = Vue.createApp({
        data() {
            return {
                skills: [],
                selected: 0,
                courses: []
            }
        },
        methods: {
            getSkills() {
                axios.get("PHP/functionGetAllSkills.php")
                    .then(response => {
                        if (response.status == 200) {
                            console.log(response.data)
                            this.skills = response.data.records
                        }
                    })
                    .catch(error => {
                        console.log(error.message);
                    });
            },

            getCourses() {
                console.log(this.selected)
                if (this.selected == 0) {
                    return;
                };

                axios
                .post("PHP/functionGetCoursesBySkill.php", {
                    skillId: this.selected,
                })
                .then(response => {
                    if (response.status == 200) {
                        console.log(response.data)
                        this.courses = response.data.records
                    }
                })
                .catch(error => {
                    console.log(error.message);
                });
            }

        },
        beforeMount(){
            this.getSkills();
        },
})

const vm = viewCoursesForSkillVue.mount("#viewCoursesForSkillVue")
</script>

